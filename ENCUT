üîç ENCUT Convergence Test

To determine the appropriate ENCUT value for your specific structure, you should perform a convergence test by running calculations with a range of ENCUT values.
The correct ENCUT is the point at which the total energy becomes stable‚Äîmeaning it no longer changes significantly with increasing ENCUT.

You can use the following Python script to automate this process. It sets up and submits VASP jobs for multiple ENCUT values:

üêç encut_convergence.py

import os

# Define ENCUT range for convergence testing
ENCUT_START = 500
ENCUT_END = 810
ENCUT_INCREMENT = 20

# Loop over ENCUT values
for ENCUT in range(ENCUT_START, ENCUT_END, ENCUT_INCREMENT):
    dir_name = f"{ENCUT}"
    os.makedirs(dir_name, exist_ok=True)
    os.chdir(dir_name)

    # Copy standard VASP input files into this directory
    os.system("cp ../POSCAR ../POTCAR ../KPOINTS .")

    # Create INCAR with dynamic ENCUT value
    with open("INCAR", "w") as file:
        file.write("SYSTEM = Ag_Se_C_H\n")
        file.write("ISTART = 0\n")
        file.write("ICHARG = 2\n")
        file.write("ISMEAR = 0\n")
        file.write("SIGMA = 0.1\n")
        file.write(f"ENCUT = {ENCUT}\n")

    # Generate SLURM job script
    with open("job.sh", "w") as file:
        file.write(f"""#!/bin/bash
#SBATCH -J encut_{ENCUT}
#SBATCH -o encut_{ENCUT}.out
#SBATCH --mail-user=mislam35@cougarnet.uh.edu
#SBATCH --mail-type=END
#SBATCH --ntasks-per-node=1
#SBATCH -N 1
#SBATCH -t 01:00:00
#SBATCH --mem-per-cpu=2GB

# Load VASP module if needed, e.g.:
# module load vasp

mpirun -n 1 $VASPCPUDIR/vasp_std | tee vasp.out
""")

    # Submit the job
    os.system("sbatch job.sh")

    # Return to the parent directory
    os.chdir("..")

‚ñ∂Ô∏è How to Run
Save the script above as encut_convergence.py.

Make sure POSCAR, POTCAR, and KPOINTS are present in the same directory.

Run the script:
python encut_convergence.py

üìä Analyze Results
After all jobs finish, extract the total energies from each vasp.out or OUTCAR file and plot energy vs ENCUT.
The optimal ENCUT is the point beyond which the energy no longer changes significantly (i.e., it converges).


